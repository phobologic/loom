{% extends "base.html" %}

{% block title %}My Games â€” Loom{% endblock %}

{% block content %}
<h1>My Games</h1>
<p>Logged in as: <strong>{{ user.display_name }}</strong></p>
{% if total_unread %}<p><a href="/notifications">{{ total_unread }} unread notification{{ 's' if total_unread != 1 }}</a></p>{% endif %}
{% if games %}
<ul>
    {% for game in games %}
    <li>
        <a href="/games/{{ game.id }}">{{ game.name }}</a>
        {% if unread_counts[game.id] %}
        <span>[{{ unread_counts[game.id] }} new]</span>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p>You have no games yet.</p>
{% endif %}

<hr>
<h2>Create a new game</h2>
<form method="post" action="/games">
    <div>
        <label for="name">Game name (required)</label><br>
        <input type="text" id="name" name="name" required maxlength="200">
    </div>
    <div style="margin-top:0.5rem;">
        <label for="pitch">Pitch / description (optional)</label><br>
        <textarea id="pitch" name="pitch" rows="3" cols="40"></textarea>
    </div>
    <button type="submit" style="margin-top:0.5rem;">Create game</button>
</form>

<form method="post" action="/dev/logout" style="margin-top:1rem;">
    <button type="submit">Log out</button>
</form>
{% endblock %}
