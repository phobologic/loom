---
id: loo-5834
status: closed
deps: []
links: [loo-bg6r]
created: 2026-02-25T04:51:53Z
type: task
priority: 1
assignee: Michael Barrett
parent: loo-qkrm
tags: [code-review, reviewer:logic]
---
# is_approved with zero total_players returns True (division by zero risk)

**File**: loom/voting.py
**Line(s)**: 6-12
**Description**: approval_threshold returns total_players / 2. When total_players is 0, this returns 0.0. is_approved then checks yes_count > 0.0, which is True if yes_count is 1 or more. In a game with no members (an edge case that should not occur in normal flow but could occur in tests or if a member record is deleted), any yes vote auto-approves. More importantly, is_approved(0, 0) returns False (0 > 0.0 is False), but is_approved(1, 0) returns True â€” a proposer with no other members would auto-approve, which is the intended behavior for single-player. However, no guard exists against negative yes_count or total_players values.
**Suggested Fix**: Add a guard: if total_players <= 0: return False (or raise ValueError). This makes the function safe against degenerate inputs and documents the intended precondition.

